<script src="js/leaflet.js"></script>
<script src="js/leaflet.ajax.min.js" type="text/javascript"></script>
<script type="text/javascript">
<!--
	var countries = [
		'Germany',
		'Switzerland',
		'Austria',
		'Belgium',
		'Netherlands',
		'Luxembourg',
		'Denmark',
		'Sweden',
		'Norway',
		'Poland',
		'United Kingdom',
		'Ireland',
		'France',
		'Italy',
		'Nicaragua',
		'Costa Rica'
	];

	var markers = L.featureGroup([
		L.marker([52.516667,13.383333]).bindPopup("<h2>Berlin</h2>BVG"),
		L.marker([48.133333,11.566667]).bindPopup("<h2>Munich</h2>MVV"),
		L.marker([50.936389, 6.952778]).bindPopup("<h2>Cologne</h2>VRR/VRS"),
		L.marker([49.488889, 8.469167]).bindPopup("<h2>Mannheim</h2>VRN"),
		L.marker([48.783333, 9.183333]).bindPopup("<h2>Stuttgart</h2>VVS"),
		L.marker([48.4, 9.983333]).bindPopup("<h2>Ulm</h2>DING"),
		L.marker([49.00921, 8.403951]).bindPopup("<h2>Karlsruhe</h2>KVV"),
		L.marker([49.75, 6.633333]).bindPopup("<h2>Trier</h2>VRN"),
		L.marker([52.366667, 9.716667]).bindPopup("<h2>Hannover</h2>GVH"),
		L.marker([51.533889, 9.935556]).bindPopup("<h2>Göttingen</h2>"),
		L.marker([53.633333, 11.416667]).bindPopup("<h2>Schwerin</h2>VMV"),
		L.marker([54.083333, 12.133333]).bindPopup("<h2>Rostock</h2>RSAG"),
		L.marker([51.333333, 12.383333]).bindPopup("<h2>Leipzig</h2>NASA"),
		L.marker([50.483333, 12.116667]).bindPopup("<h2>Plauen</h2>VVV"),
		L.marker([48.2, 16.366667]).bindPopup("<h2>Vienna</h2>WIENER LINIEN"),
		L.marker([48.3, 14.283333]).bindPopup("<h2>Linz</h2>LINZ"),
		L.marker([47.066667, 15.433333]).bindPopup("<h2>Graz</h2>STV"),
		L.marker([39.95, -75.166667]).bindPopup("<h2>Philadelphia</h2>SEPTA"),
		L.marker([-33.865, 151.209444]).bindPopup("<h2>Sydney</h2>SYDNEY"),
		L.marker([24.95, 55.333333]).bindPopup("<h2>Dubai</h2>DUB"),
		L.marker([48.8567,2.3508]).bindPopup("<h2>Paris</h2>PARIS"),
		L.marker([40.383333,-3.716667]).bindPopup("<h2>Madrid</h2>SPAIN"),
		L.marker([41.383333,2.183333]).bindPopup("<h2>Barcelona</h2>SPAIN"),
		L.marker([-23.55,-46.633333]).bindPopup("<h2>São Paulo</h2>BR"),
		L.marker([-30.033056,-51.23]).bindPopup("<h2>Porto Alegre</h2>BR"),
		L.marker([-41.288889,174.777222]).bindPopup("<h2>Wellington</h2>NZ"),
		L.marker([-36.840556,174.74]).bindPopup("<h2>Auckland</h2>NZ"),
		L.marker([60.170833, 24.9375]).bindPopup("<h2>Helsinki</h2>HSL"),
		L.marker([49.783333, 9.933333]).bindPopup("<h2>Würzburg</h2>BAVARIA"),
		L.marker([49.016667, 12.083333]).bindPopup("<h2>Regensburg</h2>BAVARIA"),
		L.marker([48.366667, 10.9]).bindPopup("<h2>Augsburg</h2>AVV"),
		L.marker([52.423056, 10.787222]).bindPopup("<h2>Wolfsburg</h2>BSVAG"),
		L.marker([50.833333, 12.916667]).bindPopup("<h2>Chemnitz</h2>VMS"),
		L.marker([49.233333, 7]).bindPopup("<h2>Saarbrücken</h2>VGS"),
		L.marker([47.266667, 11.383333]).bindPopup("<h2>Innsbruck</h2>IVB"),
		L.marker([46.55, 15.65]).bindPopup("<h2>Maribor</h2>STV"),
		L.marker([47.05, 8.3]).bindPopup("<h2>Luzern</h2>VBL"),
		L.marker([47.366667, 8.55]).bindPopup("<h2>Zurich</h2>ZVV"),
		L.marker([49.6, 6.116667]).bindPopup("<h2>Luxembourg</h2>LU"),
		L.marker([53.4, -3]).bindPopup("<h2>Liverpool</h2>MERSEY"),
		L.marker([51.507222, -0.1275]).bindPopup("<h2>London</h2>TLEM"),
		L.marker([53.347778, -6.259722]).bindPopup("<h2>Dublin</h2>TFI"),
		L.marker([44.5075, 11.351389]).bindPopup("<h2>Bologna</h2>ATC"),
		L.marker([52.233333, 21.016667]).bindPopup("<h2>Warsaw</h2>PL"),
		L.marker([43.526304, 5.445429]).bindPopup("<h2>Aix-en-Provence</h2>PACA"),
		L.marker([-27.5717, -48.6256]).bindPopup("<h2>Florianópolis</h2>BR-Floripa"),
		L.marker([43.7, -79.4]).bindPopup("<h2>Ontario</h2>Toronto, Ottawa"),
		L.marker([45.416667, -75.683333]).bindPopup("<h2>Ontario</h2>Toronto, Ottawa"),
		L.marker([-22.908333, -43.196389]).bindPopup("<h2>Rio de Janeiro</h2>BR"),
		L.marker([-19.916667, -43.933333]).bindPopup("<h2>Belo Horizonte</h2>BR"),
		L.marker([-22.900833, -47.057222]).bindPopup("<h2>Campinas</h2>BR"),
		L.marker([41.836944, -87.684722]).bindPopup("<h2>Chicago</h2>RTACHICAGO"),
//		L.marker([]).bindPopup("<h2></h2>"),
	]);

var states = [{
    "type": "Feature",
    "properties": {"regionType": "state"},
    "geometry": {
        "type": "Polygon",
        "coordinates": [[
	    [-114.0679, 48.99482],
	    [-123.2113, 48.98661],
	    [-122.8362, 48.76664],
	    [-123.2249, 48.68062],
	    [-123.0256, 48.40444],
	    [-123.4286, 48.17889],
	    [-124.8087, 48.42976],
	    [-128.9768, 46.41459],
	    [-141.7761, 53.58405],
	    [-134.5711, 54.38827],
	    [-132.435499, 54.71514],
	    [-130.7734, 54.75597],
	    [-130.143499, 55.27452],
	    [-132.5239, 57.08342],
	    [-134.399, 58.86279],
	    [-135.4766, 59.65971],
	    [-137.4746, 58.82791],
	    [-139.2188, 59.99283],
	    [-139.0491, 59.99252],
	    [-139.0521, 60.0002],
	    [-134.6593, 60.00678],
	    [-119.9986, 60.00458],
	    [-119.9963, 53.80951],
	    [-119.9477, 53.78012],
	    [-119.8858, 53.78047],
	    [-119.7358, 53.66693],
	    [-119.7114, 53.61258],
	    [-119.7774, 53.48448],
	    [-119.52, 53.37548],
	    [-119.4117, 53.37162],
	    [-119.3887, 53.36383],
	    [-119.3476, 53.33278],
	    [-119.1467, 53.19583],
	    [-118.9621, 53.25143],
	    [-118.7332, 53.1377],
	    [-118.5511, 52.91253],
	    [-118.4971, 52.91071],
	    [-118.4494, 52.89018],
	    [-118.446, 52.88081],
	    [-118.4554, 52.86656],
	    [-118.4488, 52.85906],
	    [-118.3801, 52.85013],
	    [-118.3256, 52.74198],
	    [-118.338, 52.71414],
	    [-118.2988, 52.69731],
	    [-118.2834, 52.67969],
	    [-118.2946, 52.65136],
	    [-118.2679, 52.56738],
	    [-118.2664, 52.55845],
	    [-118.2004, 52.49339],
	    [-118.1892, 52.47789],
	    [-118.2109, 52.45789],
	    [-118.2146, 52.37708],
	    [-118.1897, 52.37729],
	    [-118.1763, 52.39504],
	    [-118.1401, 52.41092],
	    [-118.0568, 52.41862],
	    [-118.0578, 52.44285],
	    [-118.0644, 52.4582],
	    [-117.991, 52.50496],
	    [-117.935, 52.4523],
	    [-117.9131, 52.45106],
	    [-117.9126, 52.44123],
	    [-117.7618, 52.41836],
	    [-117.7176, 52.39243],
	    [-117.7022, 52.36523],
	    [-117.7009, 52.35298],
	    [-117.7486, 52.31388],
	    [-117.8368, 52.27103],
	    [-117.736, 52.20655],
	    [-117.6607, 52.20299],
	    [-117.5706, 52.13433],
	    [-117.5308, 52.14682],
	    [-117.5224, 52.16036],
	    [-117.3387, 52.14683],
	    [-117.3347, 52.17418],
	    [-117.3143, 52.19151],
	    [-117.2885, 52.0863],
	    [-117.2317, 52.04564],
	    [-117.147, 51.97816],
	    [-117.1189, 51.96014],
	    [-117.1022, 51.96206],
	    [-117.0085, 51.89359],
	    [-116.9765, 51.83805],
	    [-116.9242, 51.7326],
	    [-116.9122, 51.71168],
	    [-116.8143, 51.71068],
	    [-116.805, 51.72047],
	    [-116.8247, 51.74005],
	    [-116.7512, 51.80954],
	    [-116.6817, 51.81781],
	    [-116.6578, 51.80914],
	    [-116.5969, 51.72803],
	    [-116.5808, 51.7156],
	    [-116.4987, 51.63162],
	    [-116.4642, 51.60342],
	    [-116.3886, 51.55032],
	    [-116.378, 51.53063],
	    [-116.2818, 51.46015],
	    [-116.2104, 51.3271],
	    [-116.0658, 51.25377],
	    [-116.0475, 51.23175],
	    [-116.0053, 51.22584],
	    [-115.9007, 51.09861],
	    [-115.8682, 51.09364],
	    [-115.8126, 51.0909],
	    [-115.7528, 51.07915],
	    [-115.7564, 51.06061],
	    [-115.6916, 51.033],
	    [-115.6488, 51.00325],
	    [-115.6261, 50.98486],
	    [-115.5574, 50.89349],
	    [-115.5729, 50.84367],
	    [-115.5569, 50.82939],
	    [-115.4795, 50.77386],
	    [-115.4346, 50.7603],
	    [-115.409, 50.73574],
	    [-115.3574, 50.72704],
	    [-115.3113, 50.72843],
	    [-115.2707, 50.64926],
	    [-115.2366, 50.59237],
	    [-115.1941, 50.5588],
	    [-115.1591, 50.57807],
	    [-115.1218, 50.57543],
	    [-115.0764, 50.59177],
	    [-115.0538, 50.57931],
	    [-115.0138, 50.58715],
	    [-115.0076, 50.56976],
	    [-114.8581, 50.42844],
	    [-114.7653, 50.36176],
	    [-114.7499, 50.29807],
	    [-114.7474, 50.27223],
	    [-114.7207, 50.19064],
	    [-114.6581, 50.06654],
	    [-114.6477, 49.99577],
	    [-114.6351, 49.82825],
	    [-114.6306, 49.71922],
	    [-114.6677, 49.69677],
	    [-114.6624, 49.67239],
	    [-114.6514, 49.66],
	    [-114.6595, 49.63337],
	    [-114.6758, 49.63745],
	    [-114.6888, 49.62783],
	    [-114.7028, 49.63002],
	    [-114.7428, 49.61518],
	    [-114.7279, 49.57791],
	    [-114.7088, 49.57096],
	    [-114.5883, 49.57047],
	    [-114.5689, 49.56102],
	    [-114.5645, 49.53621],
	    [-114.5626, 49.38135],
	    [-114.5245, 49.38084],
	    [-114.4677, 49.3345],
	    [-114.3923, 49.26202],
	    [-114.2218, 49.19382],
	    [-114.2089, 49.17725],
	    [-114.159, 49.15943],
	    [-114.1451, 49.14515],
	    [-114.0776, 49.06448],
	    [-114.049, 49.0233],
	    [-114.0679, 48.99482]
        ]]
    }
}];

	var mapDiv = document.getElementById('map');
	mapDiv.addEventListener("click", addMap);

	function addMap() {
		mapDiv.removeEventListener("click", addMap);
		mapDiv.style.background = 'none';

		var map = L.map('map', {
			zoom: 2,
			center: [30,0],
			attributionControl: true,
			zoomControl: true,
			scrollWheelZoom: true,
		});

		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidG92b2s3IiwiYSI6ImNqMTBvbW51bzAzZmUzM3BoZ2xwM2Q5bTQifQ.Pr02RViRmTyOyRBSAKqxHQ', {
			minZoom: 2,
			maxZoom: 8,
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery © <a href="http://mapbox.com">Mapbox</a>',
			id: 'mapbox.streets'
		}).addTo(map);

		var geojsonLayer = new L.GeoJSON.AJAX("/js/countries.geojson", {
			style: {
				"color": "#e53935",
				"stroke": false,
				"fillOpacity": 0.5,
				"clickable": false,
			},
			filter: function(feature, layer) {
				return countries.indexOf(feature.properties.name) >= 0;
			}
		}).addTo(map);

		L.geoJSON(states, {
		    style: function(feature) {
			switch (feature.properties.region) {
			case 'state': return {color: "#ff0000"};
		    }
		}
		}).addTo(map);

		markers.addTo(map);
	}
-->
</script>
